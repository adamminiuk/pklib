/** pklib JavaScript library | http://pklib.com/licencja.html **/
var pklib={VERSION:"1.2.0"};if(typeof Function.prototype.bind!=="function"){Function.prototype.bind=function(b){var d=this,c=[].slice,a=c.apply(arguments,[1]);return function(){return d.apply(b,a.concat(c.apply(arguments,[0])))}}}(function(s){var k=s.pklib;var g=30*1000;var t=0;var o=1;var f=2;var q=3;var d=4;var m=[];function l(v,w){var u=0;if(w.readyState===d){if(w.status!==undefined){u=w.status}clearTimeout(w.ontimeout);delete w.ontimeout;if((u>=200&&u<300)||u===304){i(v,w)}else{p(v,w)}}}function i(v,x){var y,u=["application/xml","text/xml"],w="responseText";if(v.cache){m[v.url]=x}y=x.getResponseHeader("Content-Type");if(k.array.in_array(y,u)){w="responseXML"}v.done.call(null,x[w]);x=null}function b(u,v){if(!v._run_error_handler){u.error(u,v);v._run_error_handler=true}}function p(u,v){v.abort();b(u,v)}function c(u,v){b(u,v)}function j(){var v;try{v=new ActiveXObject("Msxml2.XMLHTTP")}catch(w){try{v=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){throw new Error("pklib.ajax.load: can't create XMLHttpRequest object")}}return v}function n(){var u;try{u=new XMLHttpRequest()}catch(v){u=j()}return u}function a(u,w){var x,v=u.headers;if(v!==null){for(x in v){if(v.hasOwnProperty(x)){w.setRequestHeader(x,v[x])}}}}function r(u,v){v.ontimeout=setTimeout(function(){c(u,v)},u.timeout)}function h(u){return m[u.url]}function e(){return{type:"get",async:true,cache:false,url:null,params:null,timeout:g,headers:{},done:function(){},error:function(){}}}k.ajax={load:function(v){var y=null,w=e();w=k.object.mixin(w,v);w.type=w.type.toUpperCase();k.common.assert(w.url!==null,"pklib.ajax.load: @url is not defined");if(w.cache&&h(w)){l.call(null,w,m[w.url])}else{y=n();y.onreadystatechange=l.bind(null,w,y);try{y.open(w.type,w.url,w.async)}catch(u){p(w,y);return y}a(w,y);r(w,y);try{y.send(w.params)}catch(x){p(w,y);return y}}return y},stop:function(u){u.abort();u=null}}}(this));(function(e){var g=e.pklib;var f=Object.prototype.toString;function d(i){return i!==null&&typeof i==="object"&&f.call(i)==="[object Array]"&&typeof i.length==="number"&&typeof i.slice==="function"}function b(l,m){var k,j=m.length;for(k=0;k<j;++k){if(m[k]===l){return true}}return false}function c(l,m){var k,j=m.length;for(k=0;k<j;++k){if(m[k]===l){return k}}return null}function h(n){var l,m,k=[],j=n.length;for(l=0;l<j;++l){m=n[l];if(!b.call(null,m,k)){k.push(m)}}return k}function a(n){var k,m,l=Array.prototype.slice.call(arguments,1),j=l.length;for(k=0;k<j;++k){m=l[k];if(b(m,n)){n.splice(c(m,n),1)}}return n}g.array={is_array:d,in_array:b,index:c,unique:h,remove:a}}(this));pklib.aspect=function(d,f,b){var c=pklib.common.assert;var e=this,a;c(typeof d==="function","pklib.aspect: @func: not {Function}");c(typeof f==="function","pklib.aspect: @asp: not {Function}");b=b||"before";return function(){if(b==="before"){f.call(e)}a=d.apply(e,arguments);if(b==="after"){a=f.call(e)}return a}};(function(c){var d=c.pklib;function a(f,g){if(f!==true){throw new Error(g)}}function e(g,f){f=f||0;setTimeout(g,f)}function b(i,h){var f,g=100;a(typeof i==="function","pklib.common.checking: @condition: not {Function}");a(typeof h==="function","pklib.common.checking: @callback: not {Function}");if(i()){h()}else{f=setInterval(function(){if(i()){clearInterval(f);h()}},g)}}d.common={assert:a,defer:e,checking:b}}(this));(function(d){var b=d.document;var f=d.pklib;function c(j){if(j===undefined){return null}j+="=";var k,l,h=b.cookie.split(";"),g=h.length;for(k=0;k<g;++k){l=h[k];while(l.charAt(0)===" "){l=l.substring(1,l.length)}if(l.indexOf(j)===0){return decodeURIComponent(l.substring(j.length,l.length))}}return null}function a(i,j,k){var g="",h=new Date();j=j||null;if(k!==undefined){h.setTime(h.getTime()+(k*24*60*60*1000));g="; expires="+h.toGMTString()}b.cookie=i+"="+encodeURIComponent(j)+g+"; path=/";return c(i)}function e(g){return a(g,undefined,-1)}f.cookie={create:a,get:c,remove:e}}(this));(function(f){var g=f.pklib;var e=/[\n\t\r]/g;function b(k,j,i){var h=g.common.assert;var m=g.dom.is_element;var l="pklib.css."+i;h(typeof k==="string",l+": @css_class: not {String}");h(m(j),l+": @element: not {HTMLElement}")}function d(i,h){b(i,h,"add_class");var j=h.className;if(!a(i,h)){if(j.length){j+=" "+i}else{j=i}}h.className=j}function c(i,h){b(i,h,"remove_class");var j=new RegExp("(\\s"+i+")|("+i+"\\s)|"+i,"i");h.className=g.string.trim(h.className.replace(j,""))}function a(j,h){b(j,h,"has_class");var i=" "+j+" ";return((" "+h.className+" ").replace(e," ").indexOf(i)>-1)}g.css={add_class:d,remove_class:c,has_class:a}}(this));(function(n){var l=n.document;var h=n.pklib;var i=Object.prototype.toString;var s={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};function d(v,u){if(!!v){u(v);v=v.firstChild;while(v){d(v,u);v=v.nextSibling}}}function c(u){return u&&u.nodeType&&u.nodeName&&i.call(u)==="[object Node]"}function b(u){var v=["[object HTMLCollection]","[object NodeList]"];return h.array.in_array(i.call(u),v)}function q(u){return(u&&u.nodeType===s.ELEMENT_NODE)||false}function r(u){h.common.assert(q(u),"pklib.dom.is_visible: @node is not HTMLElement");return u.style.display!=="none"&&u.style.visibility!=="hidden"&&u.offsetWidth!==0&&u.offsetHeight!==0}function m(u){return l.getElementById(u)}function o(u,v){v=v||l;return v.getElementsByTagName(u)}function p(v,w){var u=[];w=w||l;d(w,function(x){if(q(x)&&h.css.has_class(v,x)){u.push(x)}});return u}function f(x){h.common.assert(q(x),"pklib.dom.index: @node is not HTMLElement");var v,w=h.dom.parent(x),u=h.dom.children(w).length;for(v=0;v<u;++v){if(e[v]===x){return v}}return null}function e(x){h.common.assert(q(x),"pklib.dom.children: @node is not HTMLElement");var v,y=[],w=x.childNodes,u=w.length;for(v=0;v<u;++v){if(q(w[v])){y.push(w[v])}}return y}function a(u,v){if(q(u)){v.appendChild(u)}else{if(h.string.is_string(u)){v.innerHTML+=u}}return u}function t(){var w,y=null,x=null,v=Array.prototype.slice.call(arguments),u=v.length;for(w=0;w<u;++w){y=v[w];if(q(y)){x=y.parentNode;x.removeChild(y)}}}function j(u){var v;h.common.assert(q(u),"pklib.dom.prev: @node is not HTMLElement");while(true){v=u.previousSibling;if(v!==undefined&&v!==null&&v.nodeType!==s.ELEMENT_NODE){u=v}else{break}}return v}function k(v){var u;h.common.assert(q(v),"pklib.dom.next: @node is not HTMLElement");while(true){u=v.nextSibling;if(u!==undefined&&u!==null&&u.nodeType!==s.ELEMENT_NODE){v=u}else{break}}return u}function g(u){var v;h.common.assert(q(u),"pklib.dom.parent: @node is not HTMLElement");while(true){v=u.parentNode;if(v!==undefined&&v!==null&&v.nodeType!==s.ELEMENT_NODE){u=v}else{break}}return v}h.dom={is_node:c,is_node_list:b,is_element:q,is_visible:r,by_id:m,by_tag:o,by_class:p,index:f,children:e,insert:a,remove:t,prev:j,next:k,parent:g}}(this));(function(e){var f=e.pklib;function d(j,i,g){if(j.events===undefined){j.events={}}var h=j.events[i];if(h===undefined){j.events[i]=[]}j.events[i].push(g);if(j.attachEvent){j.attachEvent("on"+i,g)}else{if(j.addEventListener){j.addEventListener(i,g,false)}else{j["on"+i]=g}}}function c(n,m){var l,j,g,h,k;if(n.events===undefined){n.events={}}if(n.detachEvent){l="detachEvent"}else{if(n.removeEventListener){l="removeEventListener"}}if(l===undefined){delete n["on"+m]}else{j=n.events[m];if(j!==undefined){g=j.length;for(h=0;h<g;++h){k=j[h];n[l](m,k);delete n.events[m]}}}}function a(h,g){if(h.events===undefined){h.events={}}return h.events[g]}function b(l,k){var j,g,h;if(l.events===undefined){l.events={}}j=l.events[k];if(j!==undefined){g=j.length;for(h=0;h<g;++h){j[h].call(l,j[h])}}}f.event={add:d,remove:c,get:a,trigger:b}}(this));(function(d){var f=d.pklib;var b=d.document;var e=[];function c(h,i){var g=b.createElement("script");g.type="text/javascript";g.src=h;if(g.readyState===undefined){g.onload=function(){if(typeof i==="function"){i(g)}}}else{g.onreadystatechange=function(){if(g.readyState==="loaded"||g.readyState==="complete"){g.onreadystatechange=null;if(typeof i==="function"){i(g)}}}}if(b.head===undefined){b.head=b.getElementsByTagName("head")[0]}b.head.appendChild(g)}function a(h,i){var g;if(typeof h==="string"){g=h;c(g,function(j){if(typeof i==="function"){i(j)}})}else{if(f.array.is_array(h)){if(!e.length){e=f.object.mixin(e,h)}g=h.shift();if(g===undefined){if(typeof i==="function"){i({src:e[e.length-1]});e=[]}}else{c(g,function(){a(h,i)})}}else{throw new Error("pklib.file.loadjs: @files not {String} or {Array}")}}}f.file={loadjs:a}}(this));(function(e){var g=e.pklib;var d=g.array.is_array;var a=g.array.in_array;var f=Object.prototype.toString;function c(h){return h&&f.call(h)==="[object Object]"&&typeof h==="object"&&typeof h.hasOwnProperty==="function"&&typeof h.isPrototypeOf==="function"}function b(n,m){var k,h,j,l;if(d(n)&&d(m)){h=m.length;for(k=0;k<h;++k){j=m[k];if(!a(j,n)){n.push(j)}}}else{for(l in m){if(m.hasOwnProperty(l)){if(c(n[l])){n[l]=b(n[l],m[l])}else{n[l]=m[l]}}}}return n}g.object={is_object:c,mixin:b}}(this));(function(c){var e=c.pklib;var d={};function f(g){d[g]=new Date();return d[g]}function a(g){d[g]=new Date()-d[g];return new Date((new Date()).getTime()+d[g])}function b(g){return d[g]}e.profiler={start:f,stop:a,get_time:b}}(this));(function(d){var l=d.document;var a=d.pklib;function m(p){return typeof p==="string"}function i(p){return m(p)&&(/^[a-zA-Z]$/).test(p)}function e(p){return p.replace(/^\s+|\s+$/g,"")}function f(q){var p=q.toLowerCase().replace(/\s/mg,"-");p=p.replace(/[^a-zA-Z0-9\-]/mg,function(r){switch(r.charCodeAt(0)){case 261:return String.fromCharCode(97);case 281:return String.fromCharCode(101);case 243:return String.fromCharCode(111);case 347:return String.fromCharCode(115);case 322:return String.fromCharCode(108);case 378:case 380:return String.fromCharCode(122);case 263:return String.fromCharCode(99);case 324:return String.fromCharCode(110);default:return""}});return p}function k(p){return p.substr(0,1).toUpperCase()+p.substring(1,p.length).toLowerCase()}function g(p){return p.replace(/[A-ZĘÓĄŚŁŻŹĆŃ]/g,function(q){return"-"+q.toLowerCase()})}function c(p){a.common.assert(typeof p==="string","pklib.string.strip_tags: param @source is not a string");if(p&&p.length!==0){var q=l.createElement("div");q.innerHTML=p;return q.textContent||q.innerText}return p}function h(r){while(r.indexOf("-")!==-1){var t=r.indexOf("-"),s=r.substr(0,t),q=r.substr(t+1,1).toUpperCase(),p=r.substring(t+2,r.length);r=s+q+p}return r}function o(s,r,q){a.common.assert(typeof s==="string","pklib.string.slice: param @source is not a string");if(s.length<r){return s}var t=s.slice(0,r),p;if(s[r]===" "){return t+"..."}if(t[r-1]===" "){return e(t)+"..."}if(!q){p=t.lastIndexOf(" ");if(p!==-1){return t.slice(0,p)+"..."}}return t+"..."}function n(r,q){var p;for(p in q){if(q.hasOwnProperty(p)){r=r.replace(new RegExp("%{"+p+"}","ig"),q[p])}}return r}function b(p,t,s){var r,q=p.toString();for(r=q.length;r<t;++r){q=s+q}return q}function j(p,t,s){var r,q=p.toString();for(r=q.length;r<t;++r){q+=s}return q}a.string={is_string:m,is_letter:i,trim:e,slug:f,capitalize:k,delimiter_separated_words:g,strip_tags:c,camel_case:h,slice:o,format:n,lpad:b,rpad:j}}(this));(function(b){var d=b.pklib;function a(g,j){var i=null,h=null,f=d.ui.size;d.common.assert(d.dom.is_element(g),"pklib.ui.center: @element: not {HTMLElement}");if(j===document.body){i=(Math.max(f.window("width"),f.document("width"))-f.object(g,"width"))/2;h=(Math.max(f.window("height"),f.document("height"))-f.object(g,"height"))/2}else{i=(f.window("width")-f.object(g,"width"))/2;h=(f.window("height")-f.object(g,"height"))/2}g.style.left=i+"px";g.style.top=h+"px";g.style.position="absolute";return[i,h]}function e(h,j){var i=null,g=null,f=d.ui.size;if(j===document.body){i=Math.max(f.window("width"),f.document("width"));g=Math.max(f.window("height"),f.document("height"));if(d.browser.get_name()==="msie"){i-=20}}else{i=f.object(j,"width");g=f.object(j,"height")}h.style.width=i;h.style.height=g;return[i,g]}function c(h,g){var f=null;if(g){f=setInterval(function(){document.body.scroll_top-=5;if(document.body.scroll_top<=0){clearInterval(f)}},1)}else{document.body.scroll_top=h+"px"}}d.ui={center:a,maximize:e,scroll_to:c}}(this));(function(d){var e=d.pklib;var f="pklib-glass-wrapper",c={container:null,style:{position:"absolute",left:0,top:0,background:"#000",opacity:0.5,zIndex:1000}};function a(g,k){var i=document.createElement("div"),j=i.style,h;c.container=document.body;c=e.object.mixin(c,g);c.style.filter="alpha(opacity="+parseFloat(c.style.opacity)*100+")";i.setAttribute("id",e.ui.glass.obj_id);for(h in c.style){if(c.style.hasOwnProperty(h)){j[h]=c.style[h]}}c.container.appendChild(i);e.ui.maximize(i,c.container);e.event.add(d,"resize",function(){e.ui.glass.close();e.ui.glass.show(g,k);e.ui.maximize(i,c.container)});if(typeof k==="function"){k()}return i}function b(i){var h=e.dom.by_id(e.ui.glass.obj_id),g=false;e.event.remove(d,"resize");if(h!==null){h.parentNode.removeChild(h);b(i);g=true}if(typeof i==="function"){i()}return g}e.ui.glass={obj_id:f,show:a,close:b}}(this));(function(c){var d=c.pklib;var f="pklib-loader-wrapper",b={src:"",container:null,style:{width:31,height:31,zIndex:1010},center:true};function a(i,k){var g=document.createElement("img"),h=g.style,j;b.container=document.body;b=d.object.mixin(b,i);g.setAttribute("id",d.ui.loader.obj_id);g.setAttribute("src",b.src);for(j in b.style){if(b.style.hasOwnProperty(j)){h[j]=b.style[j]}}if(b.center){d.ui.center(g,b.container);d.event.add(c,"resize",function(){d.ui.center(g,b.container)})}b.container.appendChild(g);if(typeof k==="function"){k()}g=null}function e(i){var h=d.dom.by_id(d.ui.loader.obj_id),g=false;if(h!==null){h.parentNode.removeChild(h);e(i);g=true}if(typeof i==="function"){i()}return g}d.ui.loader={obj_id:f,show:a,close:e}}(this));(function(c){var e=c.pklib;var f="pklib-message-wrapper",b={container:null,style:{width:300,height:300,zIndex:1010}};function d(g,k){var i=document.createElement("div"),j=i.style,h;b.container=document.body;b=e.object.mixin(b,g);i.setAttribute("id",e.ui.message.obj_id);for(h in b.style){if(b.style.hasOwnProperty(h)){j[h]=b.style[h]}}e.dom.insert(e.ui.message.content,i);b.container.appendChild(i);e.ui.center(i,b.container);e.event.add(c,"resize",function(){e.ui.center(i,b.container)});if(typeof k==="function"){k()}return i}function a(i){var h=e.dom.by_id(e.ui.message.obj_id),g=false;if(h!==null){h.parentNode.removeChild(h);a(i);g=true}if(typeof i==="function"){i()}return g}e.ui.message={obj_id:f,content:null,show:d,close:a}}(this));(function(d){var e=d.pklib;var a=d.document;function b(g){var h;e.common.assert(typeof g==="string","pklib.ui.size.window: @name: not {String}");g=e.string.capitalize(g);h=a.documentElement["client"+g];return(a.compatMode==="CSS1Compat"&&h)||a.body["client"+g]||h}function c(i){var k,l,j,h,g;e.common.assert(typeof i==="string","pklib.ui.size.document: @name: not {String}");i=e.string.capitalize(i);k=a.documentElement["client"+i];l=a.body["scroll"+i];j=a.documentElement["scroll"+i];h=a.body["offset"+i];g=a.documentElement["offset"+i];return Math.max(k,l,j,h,g)}function f(j,i){e.common.assert(typeof i==="string","pklib.ui.size.object: @name: not {String}");e.common.assert(e.dom.is_element(j),"pklib.ui.size.object: @obj: not {HTMLElement}");i=e.string.capitalize(i);var h=j["client"+i],g=j["scroll"+i],k=j["offset"+i];return Math.max(h,g,k)}e.ui.size={window:b,document:c,object:f}}(this));(function(b){var d=b.pklib;function c(){var f,g,e,j=b.location.search,h={};if(j.substr(0,1)==="?"){j=j.substr(1)}j=j.split("&");e=j.length;for(f=0;f<e;++f){g=j[f].split("=");h[g[0]]=g[1]}return h}function a(g){var j=b.location.search,f,h,e;if(j.substr(0,1)==="?"){j=j.substr(1)}j=j.split("&");e=j.length;for(f=0;f<e;++f){h=j[f].split("=");if(h[0]===g){return h[1]}}return null}d.url={get_params:c,get_param:a}}(this));(function(g){var a=g.document;var h=g.pklib;var e=h.event.add;function b(i){var j="";if(i.originalTarget&&typeof i.originalTarget==="object"&&i.originalTarget.href!==undefined){j=i.originalTarget.href}else{if(i.toElement&&typeof i.toElement==="object"&&i.toElement.href!==undefined){j=i.toElement.href}else{if(i.srcElement&&typeof i.srcElement==="object"&&i.srcElement!==undefined){j=i.srcElement.href}}}g.open(j);try{i.preventDefault()}catch(k){g.event.returnValue=false}return false}function d(i){if(h.dom.is_element(i)){e(i,"focus",function(){if(i.value===i.defaultValue){i.value=""}});e(i,"blur",function(){if(i.value===""){i.value=i.defaultValue}})}}function f(n){var l,j,m,k;n=n||a;k=h.dom.by_tag("a",n);j=k.length;for(l=0;l<j;++l){m=k[l];if(m.rel==="outerlink"){e(m,"click",b.bind(m))}}}function c(j,k){var i;if(j!==undefined){k=k||"Sure?";e(j,"click",function(l){i=g.confirm(k);if(!i){try{l.preventDefault()}catch(m){g.event.returnValue=false}return false}return true})}}h.utils={ascii:{letters:{lower:[113,119,101,114,116,121,117,105,111,112,97,115,100,102,103,104,106,107,108,122,120,99,118,98,110,109],upper:[81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,86,66,78,77]}},action:{clearfocus:d,outerlink:f,confirm:c}}}(this));
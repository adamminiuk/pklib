/** pklib JavaScript library | http://pklib.com/licencja.html **/
var pklib={version:"1.1.1"};if(typeof Function.prototype.bind!=="function"){Function.prototype.bind=function(b){var d=this,c=Array.prototype.slice,a=c.apply(arguments,[1]);return function(){return d.apply(b,a.concat(c.apply(arguments,[0])))}}}pklib.ajax=(function(){var i=30000,c=0,q=4,b=[];function e(s,u){var v,r=["application/xml","text/xml"],t="responseText";if(s.cache){b[s.url]=u}v=u.getResponseHeader("Content-Type");if(pklib.array.in_array(v,r)){t="responseXML"}s.done.call(null,u[t]);u=null}function g(r,s){s.error=true;r.error.call(null,r,s)}function o(s,t){var r=0;if(t.readyState===q){if(t.status!==undefined){r=t.status}if((r>=200&&r<300)||r===304){e(s,t)}else{g(s,t)}}}function p(r,s){s=null;throw new Error("pklib.ajax.load: timeout on url: "+r.url)}function l(r,s){if(s.aborted===undefined&&s.error===undefined&&s.readyState===q&&s.status===c){s.abort();p.call(null,r,s)}}function a(){var s;try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){throw new Error("pklib.ajax.load: can't create XMLHttpRequest object")}}return s}function f(){var r;try{r=new XMLHttpRequest()}catch(s){r=a()}return r}function j(r,t){var u,s=r.headers;if(s!==null){for(u in s){if(s.hasOwnProperty(u)){t.setRequestHeader(u,s[u])}}}}function k(r,s){if(typeof s.ontimeout==="function"){s.ontimeout=p.bind(null,r,s)}else{pklib.common.defer(l.bind(null,r,s),r.timeout)}}function n(r,s){s.onerror=function(){g(r,s)}}function h(r){return r.cache&&b[r.url]}function m(){return{type:"get",async:true,cache:false,url:null,params:null,timeout:i,headers:{},done:function(){},error:function(){}}}function d(r){pklib.common.assert(r.url!==null,"pklib.ajax.load: undefined request url")}return{load:function(r){var t=null,s=m();s=pklib.object.mixin(s,r);s.type=s.type.toUpperCase();d(s);if(h(s)){o.call(null,s,b[s.url])}else{t=f();t.onreadystatechange=o.bind(null,s,t);t.open(s.type,s.url,s.async);j(s,t);k(s,t);n(s,t);t.send(s.params)}return t},stop:function(r){r.abort();r.aborted=true;r=null}}}());pklib.array=(function(){var e=Object.prototype.toString;function d(g){return g!==null&&typeof g==="object"&&e.call(g)==="[object Array]"&&typeof g.length==="number"&&typeof g.slice==="function"}function b(j,k){var h,g=k.length;for(h=0;h<g;++h){if(k[h]===j){return true}}return false}function c(j,k){var h,g=k.length;for(h=0;h<g;++h){if(k[h]===j){return h}}return null}function f(l){var j,k,h=[],g=l.length;for(j=0;j<g;++j){k=l[j];if(!pklib.array.in_array.call(null,k,h)){h.push(k)}}return h}function a(l){var h,k,j=Array.prototype.slice.call(arguments,1),g=j.length;for(h=0;h<g;++h){k=j[h];if(pklib.array.in_array(k,l)){l.splice(pklib.array.index(k,l),1)}}return l}return{is_array:d,in_array:b,index:c,unique:f,remove:a}}());pklib.aspect=function(c,d,b){var e=this,a;pklib.common.assert(typeof c==="function","pklib.aspect: @func: not {Function}");pklib.common.assert(typeof d==="function","pklib.aspect: @asp: not {Function}");b=b||"before";return function(){if(b==="before"){d.call(e)}a=c.apply(e,arguments);if(b==="after"){a=d.call(e)}return a}};pklib.browser=(function(d){var b=["msie","chrome","safari","opera","mozilla","konqueror"];function a(){var g,f,e=b.length,h=d.navigator.userAgent.toLowerCase();for(g=0;g<e;++g){f=b[g];if(new RegExp(f).test(h)){return f}}return null}function c(){var h,e=b.length,g,j,f=d.navigator.userAgent.toLowerCase();for(h=0;h<e;++h){g=b[h];j=f.indexOf(g);if(j!==-1){return f.substr(j+e+1,3)}}return null}return{get_name:a,get_version:c}}(this));pklib.common=(function(){function a(d,e){if(d!==true){throw new Error(e)}}function c(e,d){d=d||0;setTimeout(e,d)}function b(g,f){var d,e=100;pklib.common.assert(typeof g==="function","pklib.common.checking: @condition: not {Function}");pklib.common.assert(typeof f==="function","pklib.common.checking: @callback: not {Function}");if(g()){f()}else{d=setInterval(function(){if(g()){clearInterval(d);f()}},e)}}return{assert:a,defer:c,checking:b}}());pklib.cookie=(function(){function b(f){if(f===undefined){return null}f+="=";var g,h,e=document.cookie.split(";"),d=e.length;for(g=0;g<d;++g){h=e[g];while(h.charAt(0)===" "){h=h.substring(1,h.length)}if(h.indexOf(f)===0){return decodeURIComponent(h.substring(f.length,h.length))}}return null}function a(f,g,h){var d="",e=new Date();g=g||null;if(h!==undefined){e.setTime(e.getTime()+(h*24*60*60*1000));d="; expires="+e.toGMTString()}document.cookie=f+"="+encodeURIComponent(g)+d+"; path=/";return b(f)}function c(d){return a(d,undefined,-1)}return{create:a,get:b,remove:c}}());pklib.css=(function(){var e=/[\n\t\r]/g;function b(h,g,f){var i="pklib.css."+f;pklib.common.assert(typeof h==="string",i+": @css_class: not {String}");pklib.common.assert(pklib.dom.is_element(g),i+": @element: not {HTMLElement}")}function d(g,f){b(g,f,"add_class");var h=f.className;if(!pklib.css.has_class(g,f)){if(h.length){h+=" "+g}else{h=g}}f.className=h}function c(g,f){b(g,f,"remove_class");var h=new RegExp("(\\s"+g+")|("+g+"\\s)|"+g,"i");f.className=pklib.string.trim(f.className.replace(h,""))}function a(h,f){b(h,f,"has_class");var g=" "+h+" ";return((" "+f.className+" ").replace(e," ").indexOf(g)>-1)}return{add_class:d,remove_class:c,has_class:a}}());pklib.date=(function(){return{get_full_month:function(){var a=(parseInt(new Date().getMonth(),10)+1);if(a<10){a="0"+a}return String(a)}}}());pklib.dom=(function(){var l={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};function e(r,q){if(!!r){q(r);r=r.firstChild;while(r){e(r,q);r=r.nextSibling}}}function c(q){try{pklib.common.assert(Boolean(q&&q.nodeType&&q.nodeName));pklib.common.assert(Object.prototype.toString.call(q)==="[object Node]");return true}catch(r){return false}}function a(q){try{var s=Object.prototype.toString.call(q),r=["[object HTMLCollection]","[object NodeList]"];pklib.common.assert(pklib.array.in_array(s,r));return true}catch(t){return false}}function b(q){return(q&&q.nodeType===l.ELEMENT_NODE)||false}function p(q){pklib.common.assert(pklib.dom.is_element(q),"pklib.dom.is_visible: @node is not HTMLElement");return q.style.display!=="none"&&q.style.visibility!=="hidden"&&q.offsetWidth!==0&&q.offsetHeight!==0}function k(q){return document.getElementById(q)}function m(q,r){r=r||document;return r.getElementsByTagName(q)}function g(r,s){var q=[];s=s||document;e(s,function(t){if(pklib.dom.is_element(t)&&pklib.css.has_class(r,t)){q.push(t)}});return q}function j(t){pklib.common.assert(pklib.dom.is_element(t),"pklib.dom.index: @node is not HTMLElement");var r,s=pklib.dom.parent(t),u=pklib.dom.children(s),q=u.length;for(r=0;r<q;++r){if(u[r]===t){return r}}return null}function d(s){pklib.common.assert(pklib.dom.is_element(s),"pklib.dom.children: @node is not HTMLElement");var r,u=[],t=s.childNodes,q=t.length;for(r=0;r<q;++r){if(pklib.dom.is_element(t[r])){u.push(t[r])}}return u}function o(q,r){if(pklib.dom.is_element(q)){r.appendChild(q)}else{if(pklib.string.is_string(q)){r.innerHTML+=q}}return q}function h(){var s,u=null,t=null,r=Array.prototype.slice.call(arguments),q=r.length;for(s=0;s<q;++s){u=r[s];if(pklib.dom.is_element(u)){t=u.parentNode;t.removeChild(u)}}}function f(q){var r;pklib.common.assert(pklib.dom.is_element(q),"pklib.dom.prev: @node is not HTMLElement");while(true){r=q.previousSibling;if(r!==undefined&&r!==null&&r.nodeType!==l.ELEMENT_NODE){q=r}else{break}}return r}function i(r){var q;pklib.common.assert(pklib.dom.is_element(r),"pklib.dom.next: @node is not HTMLElement");while(true){q=r.nextSibling;if(q!==undefined&&q!==null&&q.nodeType!==l.ELEMENT_NODE){r=q}else{break}}return q}function n(q){var r;pklib.common.assert(pklib.dom.is_element(q),"pklib.dom.parent: @node is not HTMLElement");while(true){r=q.parentNode;if(r!==undefined&&r!==null&&r.nodeType!==l.ELEMENT_NODE){q=r}else{break}}return r}return{is_node:c,is_node_list:a,is_element:b,is_visible:p,by_id:k,by_tag:m,by_class:g,index:j,children:d,insert:o,remove:h,prev:f,next:i,parent:n}}());pklib.event=(function(){function d(h,g,e){if(h.events===undefined){h.events={}}var f=h.events[g];if(f===undefined){h.events[g]=[]}h.events[g].push(e);if(h.attachEvent){h.attachEvent("on"+g,e)}else{if(h.addEventListener){h.addEventListener(g,e,false)}else{h["on"+g]=e}}}function c(l,k){var j,g,e,f,h;if(l.events===undefined){l.events={}}if(l.detachEvent){j="detachEvent"}else{if(l.removeEventListener){j="removeEventListener"}}if(j===undefined){delete l["on"+k]}else{g=l.events[k];if(g!==undefined){e=g.length;for(f=0;f<e;++f){h=g[f];l[j](k,h);delete l.events[k]}}}}function a(f,e){if(f.events===undefined){f.events={}}return f.events[e]}function b(j,h){var g,e,f;if(j.events===undefined){j.events={}}g=j.events[h];if(g!==undefined){e=g.length;for(f=0;f<e;++f){g[f].call(j,g[f])}}}return{add:d,remove:c,get:a,trigger:b}}());pklib.file=(function(){var c=[];function b(e,f){var d=document.createElement("script");d.type="text/javascript";d.src=e;if(d.readyState===undefined){d.onload=function(){if(typeof f==="function"){f(d)}}}else{d.onreadystatechange=function(){if(d.readyState==="loaded"||d.readyState==="complete"){d.onreadystatechange=null;if(typeof f==="function"){f(d)}}}}if(document.head===undefined){document.head=document.getElementsByTagName("head")[0]}document.head.appendChild(d)}function a(e,f){var d;if(typeof e==="string"){d=e;b(d,function(g){if(typeof f==="function"){f(g)}})}else{if(pklib.array.is_array(e)){if(!c.length){c=pklib.object.mixin(c,e)}d=e.shift();if(d===undefined){if(typeof f==="function"){f({src:c[c.length-1]});c=[]}}else{b(d,function(){a(e,f)})}}else{throw new TypeError("pklib.file.loadjs: @files not {String} or {Array}")}}}return{loadjs:a}}());pklib.object=(function(){var c=Object.prototype.toString;function b(d){return d&&c.call(d)==="[object Object]"&&typeof d==="object"&&typeof d.hasOwnProperty==="function"&&typeof d.isPrototypeOf==="function"}function a(j,h){var f,d,e,g;if(pklib.array.is_array(j)&&pklib.array.is_array(h)){d=h.length;for(f=0;f<d;++f){e=h[f];if(!pklib.array.in_array(e,j)){j.push(e)}}j.sort()}else{for(g in h){if(h.hasOwnProperty(g)){if(pklib.object.is_object(j[g])){j[g]=pklib.object.mixin(j[g],h[g])}else{j[g]=h[g]}}}}return j}return{is_object:b,mixin:a}}());pklib.profiler=(function(){var c={};function d(e){c[e]=new Date();return c[e]}function a(e){c[e]=new Date()-c[e];return new Date((new Date()).getTime()+c[e])}function b(e){return c[e]}return{start:d,stop:a,get_time:b}}());pklib.string=(function(){function j(m){return typeof m==="string"}function f(m){return pklib.string.is_string(m)&&/^[a-zA-Z]$/.test(m)}function c(m){return m.replace(/^\s+|\s+$/g,"")}function d(n){var m=n.toLowerCase().replace(/\s/mg,"-");m=m.replace(/[^a-zA-Z0-9\-]/mg,function(o){switch(o.charCodeAt(0)){case 261:return String.fromCharCode(97);case 281:return String.fromCharCode(101);case 243:return String.fromCharCode(111);case 347:return String.fromCharCode(115);case 322:return String.fromCharCode(108);case 378:case 380:return String.fromCharCode(122);case 263:return String.fromCharCode(99);case 324:return String.fromCharCode(110);default:return""}});return m}function i(m){return m.substr(0,1).toUpperCase()+m.substring(1,m.length).toLowerCase()}function e(m){return m.replace(/[A-ZĘÓĄŚŁŻŹĆŃ]/g,function(n){return"-"+n.toLowerCase()})}function b(m){pklib.common.assert(typeof m==="string","pklib.string.strip_tags: param @source is not a string");if(m&&m.length!==0){var n=document.createElement("div");n.innerHTML=m;return n.textContent||n.innerText}return m}function g(o){while(o.indexOf("-")!==-1){var q=o.indexOf("-"),p=o.substr(0,q),n=o.substr(q+1,1).toUpperCase(),m=o.substring(q+2,o.length);o=p+n+m}return o}function l(p,o,n){pklib.common.assert(typeof p==="string","pklib.string.slice: param @source is not a string");if(p.length<o){return p}var q=p.slice(0,o),m;if(p[o]===" "){return q+"..."}if(q[o-1]===" "){return pklib.string.trim(q)+"..."}if(!n){m=q.lastIndexOf(" ");if(m!==-1){return q.slice(0,m)+"..."}}return q+"..."}function k(o,n){var m;for(m in n){if(n.hasOwnProperty(m)){o=o.replace(new RegExp("%{"+m+"}","ig"),n[m])}}return o}function a(m,q,p){var n=m.toString(),o=n.length;for(;o<q;++o){n=p+n}return n}function h(m,q,p){var n=m.toString(),o=n.length;for(;o<q;++o){n+=p}return n}return{is_string:j,is_letter:f,trim:c,slug:d,capitalize:i,delimiter_separated_words:e,strip_tags:b,camel_case:g,slice:l,format:k,lpad:a,rpad:h}}());pklib.ui=(function(){function a(e,h){var g=null,f=null,d=pklib.ui.size;pklib.common.assert(pklib.dom.is_element(e),"pklib.ui.center: @element: not {HTMLElement}");if(h===document.body){g=(Math.max(d.window("width"),d.document("width"))-d.object(e,"width"))/2;f=(Math.max(d.window("height"),d.document("height"))-d.object(e,"height"))/2}else{g=(d.window("width")-d.object(e,"width"))/2;f=(d.window("height")-d.object(e,"height"))/2}e.style.left=g+"px";e.style.top=f+"px";e.style.position="absolute";return[g,f]}function c(f,h){var g=null,e=null,d=pklib.ui.size;if(h===document.body){g=Math.max(d.window("width"),d.document("width"));e=Math.max(d.window("height"),d.document("height"));if(pklib.browser.get_name()==="msie"){g-=20}}else{g=d.object(h,"width");e=d.object(h,"height")}f.style.width=g;f.style.height=e;return[g,e]}function b(f,e){var d=null;if(e){d=setInterval(function(){document.body.scroll_top-=5;if(document.body.scroll_top<=0){clearInterval(d)}},1)}else{document.body.scroll_top=f+"px"}}return{center:a,maximize:c,scroll_to:b}}());pklib.ui.glass=(function(){var d="pklib-glass-wrapper",c={container:null,style:{position:"absolute",left:0,top:0,background:"#000",opacity:0.5,zIndex:1000}};function a(e,i){var g=document.createElement("div"),h=g.style,f;c.container=document.body;c=pklib.object.mixin(c,e);c.style.filter="alpha(opacity="+parseFloat(c.style.opacity)*100+")";g.setAttribute("id",pklib.ui.glass.obj_id);for(f in c.style){if(c.style.hasOwnProperty(f)){h[f]=c.style[f]}}c.container.appendChild(g);pklib.ui.maximize(g,c.container);pklib.event.add(window,"resize",function(){pklib.ui.glass.close();pklib.ui.glass.show(e,i);pklib.ui.maximize(g,c.container)});if(typeof i==="function"){i()}return g}function b(g){var f=pklib.dom.by_id(pklib.ui.glass.obj_id),e=false;pklib.event.remove(window,"resize");if(f!==null){f.parentNode.removeChild(f);b(g);e=true}if(typeof g==="function"){g()}return e}return{obj_id:d,show:a,close:b}}());pklib.ui.loader=(function(){var d="pklib-loader-wrapper",b={src:"",container:null,style:{width:31,height:31,zIndex:1010},center:true};function a(g,i){var e=document.createElement("img"),f=e.style,h;b.container=document.body;b=pklib.object.mixin(b,g);e.setAttribute("id",pklib.ui.loader.obj_id);e.setAttribute("src",b.src);for(h in b.style){if(b.style.hasOwnProperty(h)){f[h]=b.style[h]}}if(b.center){pklib.ui.center(e,b.container);pklib.event.add(window,"resize",function(){pklib.ui.center(e,b.container)})}b.container.appendChild(e);if(typeof i==="function"){i()}e=null}function c(g){var f=pklib.dom.by_id(pklib.ui.loader.obj_id),e=false;if(f!==null){f.parentNode.removeChild(f);c(g);e=true}if(typeof g==="function"){g()}return e}return{obj_id:d,show:a,close:c}}());pklib.ui.message=(function(){var d="pklib-message-wrapper",b={container:null,style:{width:300,height:300,zIndex:1010}};function c(e,i){var g=document.createElement("div"),h=g.style,f;b.container=document.body;b=pklib.object.mixin(b,e);g.setAttribute("id",pklib.ui.message.obj_id);for(f in b.style){if(b.style.hasOwnProperty(f)){h[f]=b.style[f]}}pklib.dom.insert(pklib.ui.message.content,g);b.container.appendChild(g);pklib.ui.center(g,b.container);pklib.event.add(window,"resize",function(){pklib.ui.center(g,b.container)});if(typeof i==="function"){i()}return g}function a(g){var f=pklib.dom.by_id(pklib.ui.message.obj_id),e=false;if(f!==null){f.parentNode.removeChild(f);a(g);e=true}if(typeof g==="function"){g()}return e}return{obj_id:d,content:null,show:c,close:a}}());pklib.ui.size=(function(){function a(d){var e;pklib.common.assert(typeof d==="string","pklib.ui.size.window: @name: not {String}");d=pklib.string.capitalize(d);e=document.documentElement["client"+d];return(document.compatMode==="CSS1Compat"&&e)||document.body["client"+d]||e}function b(f){var h,i,g,e,d;pklib.common.assert(typeof f==="string","pklib.ui.size.document: @name: not {String}");f=pklib.string.capitalize(f);h=document.documentElement["client"+f];i=document.body["scroll"+f];g=document.documentElement["scroll"+f];e=document.body["offset"+f];d=document.documentElement["offset"+f];return Math.max(h,i,g,e,d)}function c(g,f){pklib.common.assert(typeof f==="string","pklib.ui.size.object: @name: not {String}");pklib.common.assert(pklib.dom.is_element(g),"pklib.ui.size.object: @obj: not {HTMLElement}");f=pklib.string.capitalize(f);var e=g["client"+f],d=g["scroll"+f],h=g["offset"+f];return Math.max(e,d,h)}return{window:a,document:b,object:c}}());pklib.url=(function(){function b(){var d,e,c,g=window.location.search,f={};if(g.substr(0,1)==="?"){g=g.substr(1)}g=g.split("&");c=g.length;for(d=0;d<c;++d){e=g[d].split("=");f[e[0]]=e[1]}return f}function a(e){var g=window.location.search,d,f,c;if(g.substr(0,1)==="?"){g=g.substr(1)}g=g.split("&");c=g.length;for(d=0;d<c;++d){f=g[d].split("=");if(f[0]===e){return f[1]}}return null}return{get_params:b,get_param:a}}());pklib.utils=(function(){function a(e){var f="";if(e.originalTarget&&typeof e.originalTarget==="object"&&e.originalTarget.href!==undefined){f=e.originalTarget.href}else{if(e.toElement&&typeof e.toElement==="object"&&e.toElement.href!==undefined){f=e.toElement.href}else{if(e.srcElement&&typeof e.srcElement==="object"&&e.srcElement!==undefined){f=e.srcElement.href}}}window.open(f);try{e.preventDefault()}catch(g){window.event.returnValue=false}return false}function c(e){if(pklib.dom.is_element(e)){pklib.event.add(e,"focus",function(){if(e.value===e.defaultValue){e.value=""}});pklib.event.add(e,"blur",function(){if(e.value===""){e.value=e.defaultValue}})}}function d(j){var g,e,h,f;j=j||document;f=pklib.dom.by_tag("a",j);e=f.length;for(g=0;g<e;++g){h=f[g];if(h.rel==="outerlink"){pklib.event.add(h,"click",a.bind(h))}}}function b(f,g){var e;if(f!==undefined){g=g||"Sure?";pklib.event.add(f,"click",function(h){e=window.confirm(g);if(!e){try{h.preventDefault()}catch(i){window.event.returnValue=false}return false}return true})}}return{ascii:{letters:{lower:[113,119,101,114,116,121,117,105,111,112,97,115,100,102,103,104,106,107,108,122,120,99,118,98,110,109],upper:[81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,86,66,78,77]}},action:{clearfocus:c,outerlink:d,confirm:b}}}());
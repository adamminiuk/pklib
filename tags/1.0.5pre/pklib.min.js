/** pklib v1.0.5pre | http://pklib.com/licencja.html **/

(function(global){"use strict";global.pklib={author:"Piotr Kowalski",www:"http://pklib.com/",version:"1.0.4"};}(this));if(typeof Function.prototype.bind!=="function"){Function.prototype.bind=function(that){"use strict";var method=this,slice=Array.prototype.slice,args=slice.apply(arguments,[1]);return function(){return method.apply(that,args.concat(slice.apply(arguments,[0])));};};}
(function(global){"use strict";var pklib=global.pklib||{},setTimeout=global.setTimeout,cache=[];function XHRError(message){this.name="XHRError";this.message=message||"";}
XHRError.prototype=new Error();XHRError.prototype.constructor=XHRError;function handler(settings,xhr){var contentType,xmlContentType=["application/xml","text/xml"],property="responseText";if(xhr.readyState===4){cache[settings.url]=xhr;contentType=xhr.getResponseHeader("Content-Type");if(pklib.array.inArray(contentType,xmlContentType)){property="responseXML";}
settings.done.call(null,xhr[property]);}}
function timeoutHandler(settings,xhr){}
function requestTimeout(settings,xhr){if(xhr.readyState!==4){xhr.abort();timeoutHandler.call(null,settings,xhr);}}
function getXhr(){var xhr;try{xhr=new XMLHttpRequest();}catch(a){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}catch(b){try{xhr=new ActiveXObject("Microsoft.XMLHTTP");}catch(c){throw new XHRError("pklib.ajax: XHRError: Cannot create XHR object");}}}
return xhr;}
pklib.ajax={load:function(config){var header,xhr=null,settings={type:"get",async:true,cache:false,url:null,params:null,timeout:30000,headers:{},done:function(){}};settings=pklib.array.mixin(settings,config);settings.type=settings.type.toUpperCase();if(settings.cache&&cache[settings.url]){handler.call(null,settings,cache[settings.url]);}else{xhr=getXhr();xhr.onreadystatechange=handler.bind(null,settings,xhr);xhr.open(settings.type,settings.url,settings.async);if(settings.headers!==null){for(header in settings.headers){if(settings.headers.hasOwnProperty(header)){xhr.setRequestHeader(header,settings.headers[header]);}}}
xhr.send(settings.params);if(typeof xhr.ontimeout==="function"){xhr.ontimeout=timeoutHandler.bind(null,settings,xhr);}else{setTimeout(requestTimeout.bind(null,settings,xhr),settings.timeout);}
return xhr;}}};}(this));(function(global){"use strict";var pklib=global.pklib||{};pklib.array={isArray:function(array){return typeof array==="object"&&array!==null&&typeof array.length!=="undefined"&&typeof array.slice!=="undefined";},inArray:function(param,array){var i,len=array.length;for(i=0;i<len;++i){if(array[i]===param){return true;}}
return false;},index:function(item,array){var i,len=array.length;for(i=0;i<len;++i){if(array[i]===item){return i;}}
throw new ReferenceError("pklib.array.index: @item not exists");},unique:function(array){var i,item,temp=[],len=array.length;for(i=0;i<len;++i){item=array[i];if(!this.inArray.call(null,item,temp)){temp.push(item);}}
return temp;},remove:function(array){var i,param,params=Array.prototype.slice.call(arguments,1),len=params.length;for(i=0;i<len;++i){param=params[i];if(this.inArray(param,array)){array.splice(this.index(param,array),1);}}
return array;},mixin:function(target,source){var i,len=0,element,item;if(this.isArray(target)&&this.isArray(source)){len=source.length;for(i=0;i<len;++i){element=source[i];if(!this.inArray(element,target)){target.push(element);}}
target.sort();return target;}else{for(item in source){if(source.hasOwnProperty(item)){target[item]=source[item];}}
return target;}}};}(this));(function(global){"use strict";var pklib=global.pklib||{};pklib.aspect=function(fun,asp){var that=this;if(typeof fun!=="function"){throw new TypeError("pklib.aspect: @func: not function");}
if(typeof asp!=="function"){throw new TypeError("pklib.aspect: @asp: not function");}
return function(){asp.call(that);return fun.apply(that,arguments);};};}(this));(function(global){"use strict";var pklib=global.pklib||{},navigator=global.navigator||{},browsers=["msie","chrome","safari","opera","mozilla","konqueror"];pklib.browser={getName:function(){var i,len=browsers.length,userAgent=navigator.userAgent.toLowerCase(),browser;for(i=0;i<len;++i){browser=browsers[i];if(new RegExp(browser).test(userAgent)){return browser;}}},getVersion:function(){var i,len=browsers.length,browser,cur,userAgent=navigator.userAgent.toLowerCase();for(i=0;i<len;++i){browser=browsers[i];cur=userAgent.indexOf(browser);if(cur!==-1){return userAgent.substr(cur+len+1,3);}}}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{};pklib.cookie={create:function(name,value,days){value=value||null;var expires="",date=new Date();if(typeof days!=="undefined"){date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}
document.cookie=name+"="+value+expires+"; path=/";return this.get(name);},get:function(name){if(typeof name==="undefined"){return null;}
name=name+"=";var i,c,ca=document.cookie.split(";"),len=ca.length;for(i=0;i<len;++i){c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length);}
if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}},remove:function(name){return this.create(name,undefined,-1);}};}(this));(function(global){"use strict";var pklib=global.pklib||{},rclass=/[\n\t\r]/g;function checkParams(cssClass,element,call_func_name){var prefix="pklib.css."+call_func_name;if(typeof cssClass!=="string"){throw new TypeError(prefix+": @cssClass: not String");}
if(!pklib.dom.isNode(element)){throw new TypeError(prefix+": @element: not HTMLElement");}}
pklib.css={addClass:function(cssClass,element){checkParams(cssClass,element,"addClass");var classElement=element.className;if(!this.hasClass(cssClass,element)){if(classElement.length){classElement+=" "+cssClass;}else{classElement=cssClass;}}
element.className=classElement;},removeClass:function(cssClass,element){checkParams(cssClass,element,"removeClass");var regexp=new RegExp("(\\s"+cssClass+")|("+cssClass+"\\s)|"+cssClass,"i");element.className=pklib.string.trim(element.className.replace(regexp,""));},hasClass:function(cssClass,element){checkParams(cssClass,element,"hasClass");var className=" "+cssClass+" ";return((" "+element.className+" ").replace(rclass," ").indexOf(className)>-1);}};}(this));(function(global){"use strict";var pklib=global.pklib;pklib.date={getFullMonth:function(){var month=(parseInt(new Date().getMonth(),10)+1);return(month<10)?"0"+month:month;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{};function walk_the_dom(node,func){func(node);node=node.firstChild;while(node){walk_the_dom(node,func);node=node.nextSibling;}}
pklib.dom={nodeTypes:{"ELEMENT_NODE":1,"ATTRIBUTE_NODE":2,"TEXT_NODE":3,"CDATA_SECTION_NODE":4,"ENTITY_REFERENCE_NODE":5,"ENTITY_NODE":6,"PROCESSING_INSTRUCTION_NODE":7,"COMMENT_NODE":8,"DOCUMENT_NODE":9,"DOCUMENT_TYPE_NODE":10,"DOCUMENT_FRAGMENT_NODE":11,"NOTATION_NODE":12},isNode:function(node){return((node&&node.nodeType)&&node.nodeName)||false;},isElement:function(node){return(node&&node.nodeType===this.nodeTypes.ELEMENT_NODE)||false;},byId:function(id){return document.getElementById(id);},byTag:function(tag,element){element=element||document;return element.getElementsByTagName(tag);},byClass:function(cssClass,wrapper){wrapper=wrapper||document;var results=[];if(wrapper.getElementsByClassName){return wrapper.getElementsByClassName(cssClass);}else{walk_the_dom(wrapper,function(node){if(pklib.css.hasClass(cssClass,node)){results.push(node);}});return results;}},index:function(node){var i,parent=this.parent(node),childs=this.children(parent),len=childs.length;for(i=0;i<len;++i){if(childs[i]===node){return i;}}
return null;},children:function(node){var i,array=[],childs=node.childNodes,len=childs.length;for(i=0;i<len;++i){if(this.isElement(childs[i])){array.push(childs[i]);}}
return array;},insert:function(element,node){if(this.isNode(element)){node.appendChild(element);}else if(pklib.string.isString(element)){node.innerHTML+=element;}
return element;},remove:function(){var i,node=null,parent=null,args=Array.prototype.slice.call(arguments),len=args.length;for(i=0;i<len;++i){node=args[i];if(this.isNode(node)){parent=node.parentNode;parent.removeChild(node);}}},prev:function(node){var pNode=null;while(true){pNode=node.previousSibling;if(pNode!=null&&pNode.nodeType!==this.nodeTypes.ELEMENT_NODE){node=pNode;}else{break;}}
return pNode;},next:function(node){var nNode=null;while(true){nNode=node.nextSibling;if(nNode!=null&&nNode.nodeType!==this.nodeTypes.ELEMENT_NODE){node=nNode;}else{break;}}
return nNode;},parent:function(node){var parent=null;while(true){parent=node.parentNode;if(parent!=null&&parent.nodeType!==this.nodeTypes.ELEMENT_NODE){node=parent;}else{break;}}
return parent;}};}(this));(function(global){"use strict";var pklib=global.pklib||{};pklib.event={add:function(target,eventName,handler){if(typeof target.events==="undefined"){target.events={};}
var event=target.events[eventName];if(typeof event==="undefined"){target.events[eventName]=[];}
target.events[eventName].push(handler);if(target.attachEvent){target.attachEvent("on"+eventName,handler);}else if(target.addEventListener){target.addEventListener(eventName,handler,false);}},remove:function(target,eventName){if(typeof target.events==="undefined"){target.events={};}
var removeEvent,events,len=0,i,handler;if(target.detachEvent){removeEvent="detachEvent";}else if(target.removeEventListener){removeEvent="removeEventListener";}
events=target.events[eventName];if(typeof events!=="undefined"){len=events.length;for(i=0;i<len;++i){handler=events[i];target[removeEvent](eventName,handler);delete target.events[eventName];}}},get:function(target,eventName){if(typeof target.events==="undefined"){target.events={};}
return target.events[eventName];},trigger:function(target,eventName){if(typeof target.events==="undefined"){target.events={};}
var events=target.events[eventName],len,i;if(typeof events!=="undefined"){len=events.length;for(i=0;i<len;++i){events[i].call(target,events[i]);}}else{throw new ReferenceError("pklib.event.trigger: @event "+eventName+": undefined");}}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{},lazy_file=0;function loadjs(url,callback){var script=document.createElement("script");script.type="text/javascript";script.src=url;if(script.readyState){script.onreadystatechange=function(){if(script.readyState==="loaded"||script.readyState==="complete"){script.onreadystatechange=null;if(typeof callback==="function"){callback(script);}}};}else{script.onload=function(){if(typeof callback==="function"){callback(script);}};}
if(typeof document.head==="undefined"){document.head=document.getElementsByTagName("head")[0];}
document.head.appendChild(script);}
pklib.file={loadjs:function(files,callback,is_continue){var that=this,src,len,file;if(pklib.string.isString(files)){src=files;loadjs(src,function(script){if(typeof callback==="function"){callback(script);}});}else{len=files.length;file=files[lazy_file];if(!is_continue){lazy_file=0;}
loadjs(file,function(){if(lazy_file<len-1){lazy_file+=1;that.loadjs(files,callback,true);}else{if(typeof callback==="function"){callback();}}});}}};}(this));(function(global){"use strict";var pklib=global.pklib||{};function getFunctionName(fun){var text=fun.toString().split("\n")[0].replace("function ","");return text.substr(0,text.indexOf("("))+"()";}
function getLastElement(object){var i,len=0;for(i in object){if(object.hasOwnProperty(i)){len+=1;}}
return len;}
function getIndent(len){var i,fix="\t",source="";for(i=0;i<len;++i){source+=fix;}
return source;}
pklib.json={stringify:function(object){var source="",args=Array.prototype.slice.call(arguments),index=args[1]||0,i,item,len=0;if(typeof object==="undefined"){return undefined;}else if(object===null){return null;}else if(typeof object==="boolean"){return object;}else if(typeof object==="number"){return object;}else if(pklib.string.isString(object)){return'"'+object+'"';}else if(typeof object==="function"){return getFunctionName(object);}else if(typeof object==="object"&&typeof object.slice==="function"){if(object.length===0){return"[]";}
source="[\n"+getIndent(index);index+=1;len=object.length;for(i=0;i<len;++i){source+=getIndent(index)+this.stringify(object[i],index);if(i!==len-1){source+=",\n";}}
index-=1;source+="\n"+getIndent(index)+"]";}else if(typeof object==="object"){source="{\n";index+=1;for(item in object){if(object.hasOwnProperty(item)){source+=getIndent(index)+'"'+item+'": '+this.stringify(object[item],index);if(item!==getLastElement(object)){source+=",\n";}}}
index-=1;source+="\n"+getIndent(index)+"}";}
return source;},serialize:function(source,toJson){if(typeof source!=="object"||source===null){throw new TypeError("pklib.json.serialize: @source: not object");}
var amp=false,item,value,mtz,response='';if(toJson){response+="{";}
for(item in source){if(source.hasOwnProperty(item)){if(amp){if(toJson){response+=',';}else{response+='&';}}else{amp=true;}
value='';if(typeof source[item]!=="undefined"&&source[item]!==null){value=source[item];}
mtz=toJson?'"':'';response+=item;response+=toJson?':':'=';response+=mtz;response+=value+mtz;}}
if(toJson){response+="}";}
return response;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},data={};pklib.profiler={start:function(name){data[name]=new Date();return data[name];},stop:function(name){data[name]=new Date()-data[name];return new Date((new Date()).getTime()+data[name]);},getTime:function(name){return data[name];}};}(this));(function(global){"use strict";var pklib=global.pklib||{};pklib.string={isString:function(source){return typeof source==="string";},isLetter:function(source){return this.isString(source)&&/^[a-zA-Z]$/.test(source);},trim:function(source){return source.replace(/^\s+|\s+$/g,"");},slug:function(source){var result=source.toLowerCase().replace(/\s/mg,"-");result=result.replace(/[^a-zA-Z0-9\-]/mg,function(ch){switch(ch.charCodeAt()){case 261:return String.fromCharCode(97);case 281:return String.fromCharCode(101);case 243:return String.fromCharCode(111);case 347:return String.fromCharCode(115);case 322:return String.fromCharCode(108);case 378:case 380:return String.fromCharCode(122);case 263:return String.fromCharCode(99);case 324:return String.fromCharCode(110);default:return"";}});return result;},capitalize:function(source){return source.substr(0,1).toUpperCase()+source.substring(1,source.length).toLowerCase();},delimiterSeparatedWords:function(source){return source.replace(/[A-ZĘÓĄŚŁŻŹĆŃ]/g,function(match){return"-"+match.toLowerCase();});},stripTags:function(source){return source.replace(/\\<\\S\\>/g,"");},camelCase:function(source){while(source.indexOf("-")!==-1){var pos=source.indexOf("-"),pre=source.substr(0,pos),sub=source.substr(pos+1,1).toUpperCase(),post=source.substring(pos+2,source.length);source=pre+sub+post;}
return source;},slice:function(source,length){var item,text="",num=source.length;for(item=0;item<num;item+=1){text+=source.substr(item,1);if(item===length-1){if(num-length>=1){text+="...";}
break;}}
return text;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document;pklib.ui={center:function(element,wrapper){var left=null,top=null,pus=this.size;if(!pklib.dom.isElement(element)){throw new TypeError("pklib.ui.center: @element: not Element");}
if(wrapper===document.body){left=(Math.max(pus.window("width"),pus.document("width"))-pus.object(element,"width"))/2;top=(Math.max(pus.window("height"),pus.document("height"))-pus.object(element,"height"))/2;}else{left=(pus.window("width")-pus.object(element,"width"))/2;top=(pus.window("height")-pus.object(element,"height"))/2;}
element.style.left=left+"px";element.style.top=top+"px";element.style.position="absolute";return[left,top];},maximize:function(element,wrapper){var width=null,height=null,pus=pklib.ui.size;if(wrapper===document.body){width=Math.max(pus.window("width"),pus.document("width"));height=Math.max(pus.window("height"),pus.document("height"));if(pklib.browser.getName()==="msie"){width-=20;}}else{width=pus.object(wrapper,"width");height=pus.object(wrapper,"height");}
element.style.width=width;element.style.height=height;return[width,height];},scrollTo:function(param,animate){var interval=null;if(true===animate){interval=global.setInterval(function(){document.body.scrollTop-=5;if(document.body.scrollTop<=0){global.clearInterval(interval);}},1);}else{document.body.scrollTop=param+"px";}}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{},id="pklib-glass-wrapper",settings={container:null,style:{position:"absolute",left:0,top:0,background:"#000",opacity:0.5,zIndex:1000}};if(typeof pklib.ui==="undefined"){pklib.ui={};}
pklib.ui.glass={objId:id,show:function(config,callback){var that=this,glass=document.createElement("div"),glassStyle=glass.style,style;settings.container=document.body;settings=pklib.array.mixin(settings,config);settings.style.filter="alpha(opacity="+parseFloat(settings.style.opacity,10)*100+")";glass.setAttribute("id",this.objId);for(style in settings.style){if(settings.style.hasOwnProperty(style)){glassStyle[style]=settings.style[style];}}
settings.container.appendChild(glass);pklib.ui.maximize(glass,settings.container);pklib.event.add(global,"resize",function(){that.close();that.show(config,callback);pklib.ui.maximize(glass,settings.container);});if(typeof callback==="function"){callback();}
return glass;},close:function(callback){var glass=pklib.dom.byId(this.objId),result=false;if(glass!==null){glass.parentNode.removeChild(glass);this.close(callback);result=true;}
if(typeof callback==="function"){callback();}
return result;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{},id="pklib-loader-wrapper",settings={src:"",container:null,style:{width:31,height:31,zIndex:1010},center:true};if(typeof pklib.ui==="undefined"){pklib.ui={};}
pklib.ui.loader={objId:id,show:function(config,callback){settings.container=document.body;settings=pklib.array.mixin(settings,config);var loader=document.createElement("img"),loaderStyle=loader.style,style;loader.setAttribute("id",this.objId);loader.setAttribute("src",settings.src);for(style in settings.style){if(settings.style.hasOwnProperty(style)){loaderStyle[style]=settings.style[style];}}
if(settings.center){pklib.ui.center(loader,settings.container);pklib.event.add(global,"resize",function(){pklib.ui.center(loader,settings.container);});}
settings.container.appendChild(loader);if(typeof callback==="function"){callback();}
loader=null;},close:function(callback){var loader=pklib.dom.byId(this.objId),result=false;if(loader!==null){loader.parentNode.removeChild(loader);this.close(callback);result=true;}
if(typeof callback==="function"){callback();}
return result;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{},id="pklib-message-wrapper",settings={container:null,style:{width:300,height:300,zIndex:1010}};if(typeof pklib.ui==="undefined"){pklib.ui={};}
pklib.ui.message={objId:id,content:null,show:function(config,callback){settings.container=document.body;settings=pklib.array.mixin(settings,config);var message=document.createElement("div"),messageStyle=message.style,style;message.setAttribute("id",this.objId);for(style in settings.style){if(settings.style.hasOwnProperty(style)){messageStyle[style]=settings.style[style];}}
if(pklib.string.isString(this.content)){message.innerHTML=this.content;}else if(pklib.dom.isNode(this.content)){message.appendChild(this.content);}
settings.container.appendChild(message);pklib.ui.center(message,settings.container);pklib.event.add(global,"resize",function(){pklib.ui.center(message,settings.container);});if(typeof callback==="function"){callback();}
return message;},close:function(callback){var message=pklib.dom.byId(this.objId),result=false;if(message!==null){message.parentNode.removeChild(message);this.close(callback);result=true;}
if(typeof callback==="function"){callback();}
return result;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document;if(typeof pklib.ui==="undefined"){pklib.ui={};}
pklib.ui.size={window:function(name){var clientName;if(typeof name==="undefined"){throw new TypeError("pklib.ui.size.window: @name: undefined");}
name=pklib.string.capitalize(name);clientName=global.document.documentElement["client"+name];return(global.document.compatMode==="CSS1Compat"&&clientName)||global.document.body["client"+name]||clientName;},document:function(name){var clientName,scrollBodyName,scrollName,offsetBodyName,offsetName;if(typeof name==="undefined"){throw new TypeError("pklib.ui.size.document: @name: undefined");}
name=pklib.string.capitalize(name);clientName=document.documentElement["client"+name];scrollBodyName=document.body["scroll"+name];scrollName=document.documentElement["scroll"+name];offsetBodyName=document.body["offset"+name];offsetName=document.documentElement["offset"+name];return Math.max(clientName,scrollBodyName,scrollName,offsetBodyName,offsetName);},object:function(obj,name){if(typeof name==="undefined"||typeof obj==="undefined"){throw new TypeError("pklib.ui.size.object: @name: undefined");}
name=pklib.string.capitalize(name);var client=obj["client"+name],scroll=obj["scroll"+name],offset=obj["offset"+name];return Math.max(client,scroll,offset);}};}(this));(function(global){"use strict";var pklib=global.pklib||{},loc=global.location;pklib.url={getProtocol:function(){return loc.protocol;},getHost:function(){return loc.host;},getPort:function(){return loc.port||80;},getUri:function(){return loc.pathname;},getParams:function(){var i,item,len=0,params=loc.search,params_obj={};if(params.substr(0,1)==="?"){params=params.substr(1);}
params=params.split("&");len=params.length;for(i=0;i<len;++i){item=params[i].split("=");params_obj[item[0]]=item[1];}
return params_obj;},getParam:function(key){var params=loc.search,i,item,len=params.length;if(params.substr(0,1)==="?"){params=params.substr(1);}
params=params.split("&");for(i=0;i<len;++i){item=params[i].split("=");if(item[0]===key){return item[1];}}},getHash:function(){return loc.hash;}};}(this));(function(global){"use strict";var pklib=global.pklib||{},document=global.document||{};pklib.utils={ascii:{letters:{lower:[113,119,101,114,116,121,117,105,111,112,97,115,100,102,103,104,106,107,108,122,120,99,118,98,110,109],upper:[81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,86,66,78,77]}},action:{clearfocus:function(obj){if(typeof obj!=="undefined"){pklib.event.add(obj,"focus",function(){if(this.value===this.defaultValue){this.value="";}});pklib.event.add(obj,"blur",function(){if(this.value===""){this.value=this.defaultValue;}});}},outerlink:function(area){area=area||document;var i,link,links=pklib.dom.byTag("a"),len=links.length,opentrigger=function(evt){global.open(this.href);evt.preventDefault();};for(i=0;i<len;++i){link=links[i];if(link.rel==="outerlink"){pklib.event.add(link,"click",opentrigger.bind(link));}}},confirm:function(element,text){var response;if(typeof element!=="undefined"){text=text||"Sure?";pklib.event.add(element,"click",function(evt){response=global.confirm(text);if(true===response){return true;}else{evt.preventDefault();}});}}}};}(this));